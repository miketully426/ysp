---
import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import Input from "../components/Input.astro";
import Select from "../components/Select.astro";

const states = [ 'AL', 'AK', 'AS', 'AZ', 'AR', 'CA', 'CO',
'CT', 'DE', 'DC', 'FM', 'FL', 'GA', 'GU', 'HI', 'ID', 'IL',
'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MH', 'MD', 'MA', 'MI',
'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY',
'NC', 'ND', 'MP', 'OH', 'OK', 'OR', 'PW', 'PA', 'PR', 'RI',
'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VI', 'VA', 'WA', 'WV',
'WI', 'WY' ];
const gradYears = [2023, 2024, 2025, 2026];
const shirtSizes = ['S', 'M', 'L', 'XL', 'XXL'];
const danceExp = ['None', '0-2 years', '3-5 years', '5+ years']
---

<script>
	const form = document.querySelector("#form");
	const submitButton = document.querySelector("#submit");
	const scriptURL =
		"https://script.google.com/macros/s/AKfycbz_icPbEpi8YDxkLX5JDlmmCZfEBB0SMMkmuEMjeReUiIXcMd8MJHQU5CDgp1mTdEMEXA/exec";

	form.addEventListener("submit", (e) => {
		submitButton.disabled = true;
		e.preventDefault();
		let requestBody = new FormData(form);
		fetch(scriptURL, { method: "POST", body: requestBody })
			.then((response) => {
				alert("Success!", response);
				submitButton.disabled = false;
			})
			.catch((error) => {
				alert("Error!", error.message);
				submitButton.disabled = false;
			});
	});
</script>
<Layout title="Apply">
	<form id="form">
	<div class='card-label'>Contact Info</div>
	<Card height="auto" width="70%" margin="0 15% 0 15%">
		<div class='form-container'>
		<Input label="First Name" name='firstName'/>
		<Input label="Last Name" name='lastName'/>
		<br/>
		<Input label="Preferred Name" name='preferredName'/>
		<br/>
		<Input label="Street Address" name='street'/>
		<br/>
		<Input label="City" name='city'/>
		<Select label="State" name="state" options={states}></Select>
		<Input label="Zip Code" name='zip'/>
		<br/>
		<Input label="Participant Email" name='participantEmail'/>
		<Input label="Participant Phone Number" name='participantNumber'/>
		<br/>
		<Input label="Parent Email" name='parentEmail'/>
		<Input label="Parent Phone Number" name='parentNumber'/>
	</div>
	</Card>
	<div class='card-label'>Affiliations</div>
	<Card height="auto" width="70%" margin="0 15% 0 15%" >
		<div class='form-container'>
		<Input label="22-23 High School" name='school'/>
		<Select label="Graduation Year" name='gradYear' options={gradYears} />
		<Input label='Parish' name='parish'/>
		</div>
	</Card>
	<div class='card-label'>Performer Info</div>
	<Card height="auto" width="70%" margin="0 15% 0 15%" >
		<div class='form-container'>
		<Input label="Voice Type" name='voiceType'/>
		<Select label='Dance Experience' name='danceExp' options={danceExp} /> 
		<Select label="T-Shirt Size" name='shirtSize' options={shirtSizes} />
		<br/>
		<Input label='Audition Video Link' name='audition' />
		</div>
	</Card>
	<button id="submit" type="submit">Submit</button>
</form>

</Layout>

<style>
	.form-container {
		padding: 20px 0 20px 40px;
		text-align: left;
	}
	.form-content {
		font-size: 24px;
		color: #e9ecef;
		font-family: "Josefin Sans", sans-serif;
		padding: 40px;
	}

	button {
		background: yellow;
		border-radius: 30px;
		width: 10ch;
		height: 40px;
		margin-top: 10px;
		color: #9c36b5;
		font-size: 24px;
		font-family: "Josefin Sans", sans-serif;
	}
	button:hover,
	button:disabled {
		color: yellow;
		background-color: #9c36b5;
	}
	form {
		padding-bottom: 40px;
	}
	.card-label{
		font-family: "Roboto", sans-serif;
		font-size: 30px;
		background-color: rgba(156, 54, 181, 0.8);
		border-radius: 30px 30px 0 0 ;
		width: 20%;
		height: 40px;
		color: #e9ecef;
		margin: 30px 40% 0 40%;
	}
</style>
