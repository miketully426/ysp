---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';

---
<script>
	const form = document.querySelector("#form")
   const submitButton = document.querySelector("#submit")
   const scriptURL = 'https://script.google.com/macros/s/AKfycbz_icPbEpi8YDxkLX5JDlmmCZfEBB0SMMkmuEMjeReUiIXcMd8MJHQU5CDgp1mTdEMEXA/exec'

   form.addEventListener('submit', e => {
     submitButton.disabled = true
     e.preventDefault()
     let requestBody = new FormData(form)
     fetch(scriptURL, { method: 'POST', body: requestBody})
       .then(response => {
          alert('Success!', response)
          submitButton.disabled = false
         })
       .catch(error => {
       alert('Error!', error.message)
         submitButton.disabled = false

       }
       )
   })
</script>
<Layout title="Apply">

		<Card height="auto" width="70%" margin="40px 15% 0 15%">
			<section class='form-content'>
				2023 applications are coming soon! <br/>Sign up to find out as soon as they're available.
			</section>
			<form id='form'>
				<label>Name 
					<input type="text" name='name'/>
				</label><br/>
				<label>Email 
					<input type='email' name='email'/>
				</label><br/>

				<button id='submit' type="submit">Submit</button>
			</form>
		</Card>
</Layout>

<style>
	.form-container{
        width: 70%;
        margin: 40px 15% 0 15%;
        background-color: rgba(156, 54, 181, .8);
        border-radius: 30px;
	}
	.form-content{
        font-size: 24px;
        color: #e9ecef;
		font-family: 'Josefin Sans', sans-serif;
        padding: 40px;
    }
	label{
		font-family: 'Josefin Sans', sans-serif;
		font-size: 20px;
		color: #e9ecef;
	}
	input {
		border-radius: 30px;
		height: 24px;
		width: 25ch;
		margin-bottom: 8px;
		padding-left: 1ch;
	}
	button {
		background: yellow;
		border-radius: 30px;
		width: 10ch;
		height: 32px;
		margin-top: 10px;
		color: #9c36b5;
		font-size: 16px;
		font-family: 'Josefin Sans', sans-serif;
	}
	button:hover,
	button:disabled {
		color: yellow;
		background-color: #9c36b5;
	}
	form {
		padding-bottom: 40px;
	}
</style>
